{% extends "manager_app/manager.html" %}

{% load static %}

{% block main %}
<a href="{% url 'manager_app:lost_item_page' %}"><button class="openbtn" style="" >â†© </button></a> 
<div style=" display: flex; justify-content: center;  width: 100%; height: 100%;  ">
    <div style=" "> 
        <h1 style="text-align: center;"> Lost item request</h1>
<div class="three-columns-grid" style="background-color: #E8F6EF; color: #444; border-radius: 4px; width: 100%;" >
    <div style="padding: 10px; ">
    
          

  
       

        <div class="ag-courses_item" style="min-height: 555px; width: 450px; border-radius: 5px; padding-top: 13px;">
           <a class="ag-courses-item_link" style="height: 560px;">
            <div class="ag-courses-item_date-box">
              {% if lost_item.image.url == '/media/images/default.jpg' %}
                  <div style="margin-top: 50px;"></div>
                {% else %}
                <img src="{{lost_item.image.url}}" width="90%" height="150" alt="" srcset="">
              
              {% endif %}
            
              
            </div>
              <div class="ag-courses-item_bg" 
              {% if lost_item.color == 'G' %}
                style=" background-color: rgb(58, 203, 58);"
                {% elif lost_item.color == 'R' %}
                style="background-color: rgb(255, 73, 73);"
                {% elif lost_item.color == 'B' %}
                style="background-color: rgb(73, 109, 255);"
                {% elif lost_item.color == 'BLA' %}
                style="background-color: rgb(18, 15, 15);"
                {% elif lost_item.color == 'Y' %}
                style="background-color: rgb(213, 245, 72);"
                {% elif lost_item.color == 'W' %}
                style="background-color: rgb(193, 194, 184);"
                {% endif %}>
            </div>
              <div class="ag-courses-item_title">
                <h3>informations </h3><h4>about the request</h4>
         
              </div>
              <div class="ag-courses-item_date-box">
                category :
                <span class="ag-courses-item_date">
                    {{lost_item.catagory.name}}
                </span>
              </div>
              <div class="ag-courses-item_date-box">
                sub category:
                <span class="ag-courses-item_date">
                    {{lost_item.Sub_catagory.name}}
                </span>
              </div>
        
              <div class="ag-courses-item_date-box">
                lost in  :
                <span class="ag-courses-item_date">
                    {{lost_item.get_place_display}}
                </span>
              </div>
       
       
             
                <div class="ag-courses-item_date-box">
                    nameOwner:
                    <span class="ag-courses-item_date">
                        {{lost_item.name}}
                    </span>
                  </div>
                  <div class="ag-courses-item_date-box">
                    phoneNumber:
                    <span class="ag-courses-item_date">
                        {{lost_item.phone_number}}
                    </span>
                  </div>
                  <div class="ag-courses-item_date-box">
                    email:
                    <span class="ag-courses-item_date">
                        {{lost_item.email}}
                    </span>
                  </div>

       
              <div class="ag-courses-item_date-box">
                created at :
                <span class="ag-courses-item_date">
                    {{lost_item.created_at}}
                </span>
              </div>
              <div class="ag-courses-item_date-box" style=" margin-bottom: 10px; min-height: 200px;   border-radius: 5px; padding: 13px;">
               
                <h2 style="text-align: center;">lost description </h2>
              
                <h5>{{lost_item.description}}</h5> 
            </div>
            </a>
          </div>
    
        


    </div>

    <div style="display: flex; justify-content: center; align-content: center;  ">
        <br>
        <img src="{% static 'style/icons8-plus-250.png' %}" width="100px" style="position: relative; top: 220px;" height="100px" alt="" srcset="">
     
    </div>

    <div style="" >


   
        

        <div style=" padding: 0px 10px ; ">
           
              
            
        <div class="ag-courses-item_link" style=" border-radius: 5px; min-height: 555px; width: 450px;  ">
          <h2 style="text-align: center; color: #E8F6EF;">match lost items </h2>
          {% if confirm_items %}
            {% for confirm_item in confirm_items %}
              
            
            
          <div class="ag-courses-item_date-box">
            
            <img src="{{confirm_item.found_item.image.url}}" style="border-radius: 10px;" width="100%" height="200px" alt="">
                <h5>description of found: </h5><h6>{{confirm_item.found_item.description}}</h6>
            </div>
                
         
             
             
              <div class="ag-courses-item_date-box">
                category :<span class="ag-courses-item_date"> {{confirm_item.request_Lost_Item.catagory.name}} </span> sub category: <span class="ag-courses-item_date"> {{confirm_item.found_item.Sub_catagory.name}} </span>
               
              </div>
              <div class="ag-courses-item_date-box">
                the item is<span class="ag-courses-item_date"> {{confirm_item.found_item.get_color_display}} </span> color 
               
              </div>
              <div class="ag-courses-item_date-box">
                the item fuond in <span class="ag-courses-item_date"> {{confirm_item.found_item.get_place_display}} </span> 
               
              </div>
            
         
              
        <div style="display: flex; justify-content:space-evenly;  padding-top: 20px; ">
            <div class="ag-courses-item_date-box">
              {% if not confirm_item.is_confirm %}  
              {% if not confirm_item.is_send %}
                <a href="{% url 'manager_app:send_email_form' lost_item_id=lost_item.id confirm_item_id=confirm_item.id %}" style=" margin-right: 4px;  padding: 10px; border-bottom-left-radius: 8px; text-decoration: none; color:#E8F6EF ;    background-color:  #5947FF  ">
                  send email to check
              </a>  
              {% else %}
              <a href="{% url 'manager_app:send_email_form' lost_item_id=lost_item.id confirm_item_id=confirm_item.id %}" style=" margin-right: 4px;  padding: 10px; border-bottom-left-radius: 8px; text-decoration: none; color:#E8F6EF ;    background-color:  #3C7AD7  ">
              email is sended
            </a>  
                {% endif %}
                {% endif %}
               
                  
                
                {% if confirm_item.is_confirm %}
                <a href="{% url 'manager_app:confirm_item_true_for_lost_detail' lost_item_id=lost_item.id found_item_id=confirm_item.found_item.id  %}" style=" margin-right: 4px; padding: 10px;  text-decoration: none; color:#E8F6EF ;    background-color:  #3C9CD7  ">
                 cancel confirm
              </a>
              
              {% else %}
              {% if not confirm_item.is_send or confirm_item.is_reserved %}
              <a href="{% url 'manager_app:confirm_item_true_for_lost_detail' lost_item_id=lost_item.id found_item_id=confirm_item.found_item.id  %}" style=" margin-right: 4px;  padding: 10px;  text-decoration: none; color:#E8F6EF ;    background-color:  #5947FF  ">
                confirm
            </a>
            {% endif %}
                {% endif %}

                {% if not confirm_item.is_confirm %}
                <a href="{% url 'manager_app:discard_confirm_item_for_lost_detail' lost_item_id=lost_item.id found_item_id=confirm_item.found_item.id %}" style="  padding: 10px; border-top-right-radius: 8px; text-decoration: none; color:#E8F6EF ;    background-color:  #FF474790  ">
                    discard
                </a>
                {% endif %}
              </div>
        </div>
        <p>
    
        {% if  confirm_item.is_reserved or confirm_item.from_ai %}
        <div class="wrap-collabsible" > 
          <input id="collapsible" class="toggle" type="checkbox"> 
          <label for="collapsible" class="lbl-toggle">see the additional description</label>
          <div class="collapsible-content"><div class="content-inner">
            <p style="color: #E8F6EF;"> {{confirm_item.message_form}}</p></div></div></div>
          
        {% endif %}
        
        {% endfor %}
        {% else %}
        <div class="ag-courses-item_date-box">
            <h1 style="text-align: center;"> notheng selected  <h1>
        </div>
        {% endif %}
        
    </div>


</div>



    </div>
  </div>

  {% if not confirm_items %}
      
   
    {% if found_item %}
      
    
    <div style=" background-color: #E8F6EF;">
        <div style="  height: 550px; color:#444;  border-radius: 5px; padding-top: 13px;">
            <h2 style="text-align: center;">found item </h2>

            <div style="overflow-y: scroll;  padding: 0px 10px ; height: 490.7px;">
                {% for found in found_item %}
                  
                
            <div class="ag-courses-item_link" style=" border-radius: 10px;  margin-bottom: 12px; display: flex; ">
              <div style="margin-right: 20px; border-radius: 20px; overflow: hidden;">
              <img  src="{{found.image.url}}" width="220" height="170" alt="">
            </div>
            <div style="width: 340px;">
                <div class="ag-courses-item_bg" 
                {% if found.color == 'G' %}
                  style=" background-color: rgb(58, 203, 58);"
                  {% elif found.color == 'R' %}
                  style="background-color: rgb(255, 73, 73);"
                  {% elif found.color == 'B' %}
                  style="background-color: rgb(73, 109, 255);"
                  {% elif found.color == 'BLA' %}
                  style="background-color: rgb(18, 15, 15);"
                  {% elif found.color == 'Y' %}
                  style="background-color: rgb(213, 245, 72);"
                  {% elif found.color == 'W' %}
                  style="background-color: rgb(193, 194, 184);"
                  {% endif %}>
                  
              </div>
             
              <div class="ag-courses-item_date-box">
                
                    <h5>description: </h5><h6>{{found.description}}</h6>
                </div>
                    
             
                 
                  <div class="ag-courses-item_date-box">
                     request lost Item id : {{found.id}}
                  </div>
                  
                  <div class="ag-courses-item_date-box">
                    category :<span class="ag-courses-item_date"> {{found.catagory.name}} </span> sub category: <span class="ag-courses-item_date"> {{found.Sub_catagory.name}} </span>
                   
                  </div>
                
                  <div class="ag-courses-item_date-box">
                    lost in {{found.get_place_display}}   in <span class="ag-courses-item_date"> {{found.get_status_display}} </span> status
                   
                  </div>
                  <div class="ag-courses-item_date-box">
                   
                    
                  </div>
                  <div class="ag-courses-item_date-box">
                    created at :
                    <span class="ag-courses-item_date">
                        {{found.created_at}}
                    </span>
                 
                
                  

           
            
              
  
             
        </div>

      </div>
      <div class="ag-courses-item_date-box" style="float: right; ">
        {% if not confirm_items %}
        <a href=" {% url 'manager_app:confirm_item_for_lost_detail' found_item_id=found.id lost_item_id=lost_item.id %}" style=" position: relative; top: 160px; padding: 10px; border-radius: 8px; text-decoration: none; color:#E8F6EF ;    background-color:  #474bff  ">
          match
      </a>
      
        {% endif %}
      </div>
            </div>
        {% endfor %}
        {% endif %}
        {% endif %}
    </div>
    </div>
</div>

 {% endblock %}